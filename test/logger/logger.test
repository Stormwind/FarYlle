package require tcltest
namespace import ::tcltest::*

source logger/Logger.tcl

test createLogger {} -body {
  set logger [Logger new]
  info object class $logger
} -result "::Logger"

test getAllLogLevels {} -body {
  $logger getAllLogLevels
} -result "error notice info debug"

test getDebug {} -body {
  $logger getDebug
} -result 0

test setDebugOn {} -body {
    $logger setDebug 1
} -result 1

test getDebug {} -body {
  $logger getDebug
} -result 1

test setDebugOff {} -body {
    $logger setDebug 0
} -result 0

test setLogChannel {} -body {
  $logger setLogChannel "info" stdout
} -result 1

test setInvalidLogChannel {} -body {
  try {
    $logger setLogChannel "foobar" stdout
    } trap {LOG BADLEVEL} {message} {
      puts $message
    }
} -output "Cannot set channel for log level 'foobar', because this log level does not exist.\n"

cleanupTests
